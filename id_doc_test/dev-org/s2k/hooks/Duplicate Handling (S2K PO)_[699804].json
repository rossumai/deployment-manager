{
  "id": 699804,
  "type": "webhook",
  "name": "Duplicate Handling (S2K PO)",
  "url": "https://us.api.rossum.ai/v1/hooks/699804",
  "description": "Detect duplicate documents based on custom rules and apply actions on detected duplicates.",
  "settings": {
    "configurations": [
      {
        "logic": [
          {
            "rules": [
              {
                "id": 1,
                "attribute": "field",
                "field_schema_id": "date_issue"
              },
              {
                "id": 2,
                "attribute": "field",
                "field_schema_id": "amount_due"
              },
              {
                "id": 3,
                "attribute": "field",
                "field_schema_id": "selected_vendor_id"
              },
              {
                "id": 4,
                "attribute": "relation"
              },
              {
                "id": 5,
                "attribute": "field",
                "field_schema_id": "document_id"
              }
            ],
            "scope": {
              "object": "queue",
              "statuses": [
                "to_review",
                "reviewing",
                "in_workflow",
                "rejected",
                "exporting",
                "exported",
                "failed_export",
                "postponed",
                "deleted"
              ]
            },
            "actions": [
              {
                "type": "stop_automation"
              }
            ],
            "matching_flow": [
              "1and2and3and5",
              "4"
            ]
          }
        ],
        "trigger_events": [
          "annotation_status",
          "annotation_content"
        ]
      },
      {
        "logic": [
          {
            "rules": [
              {
                "id": 1,
                "attribute": "field",
                "field_schema_id": "date_issue"
              },
              {
                "id": 2,
                "attribute": "field",
                "field_schema_id": "amount_due"
              },
              {
                "id": 3,
                "attribute": "field",
                "field_schema_id": "selected_vendor_id"
              },
              {
                "id": 4,
                "attribute": "relation"
              },
              {
                "id": 5,
                "attribute": "field",
                "field_schema_id": "document_id"
              }
            ],
            "scope": {
              "object": "queue",
              "statuses": [
                "to_review",
                "reviewing",
                "in_workflow",
                "rejected",
                "exporting",
                "exported",
                "failed_export",
                "postponed",
                "deleted"
              ]
            },
            "actions": [
              {
                "type": "show_message",
                "message": "Detected {duplicate_ids | length} duplicates.<br> Date of detection: {now.strftime('%m/%d/%Y')}. <br> List of duplicates (IDs): %ANNOTATION_ID%",
                "message_type": "warning"
              },
              {
                "type": "forward_annotation",
                "target_status": "postponed"
              },
              {
                "type": "mark_duplicate"
              }
            ],
            "matching_flow": [
              "1and2and3and5",
              "4"
            ]
          }
        ],
        "statuses": [
          "importing.to_review",
          "to_review.postponed"
        ],
        "trigger_events": [
          "annotation_status"
        ],
        "trigger_actions": [
          "changed"
        ]
      }
    ]
  },
  "active": true,
  "events": [
    "annotation_content.initialize",
    "annotation_content.started",
    "annotation_content.updated",
    "annotation_content.confirm",
    "annotation_content.export",
    "annotation_status.changed"
  ],
  "queues": [
    "https://us.api.rossum.ai/v1/queues/1771791"
  ],
  "run_after": [],
  "metadata": {},
  "config": {
    "private": true,
    "schedule": {},
    "app": null,
    "payload_logging_enabled": true,
    "timeout_s": 30,
    "max_polling_time_s": 300,
    "retry_count": 4,
    "retry_after_polling_failure": true,
    "insecure_ssl": false,
    "client_ssl_certificate": null,
    "retry_on_any_non_2xx": false
  },
  "test": {},
  "sideload": [],
  "settings_schema": null,
  "secrets_schema": {
    "type": "object",
    "additionalProperties": {
      "type": "string"
    }
  },
  "token_owner": "https://us.api.rossum.ai/v1/users/383208",
  "extension_source": "rossum_store",
  "guide": "<div style=\"color: var(--white)\">\r\n<p>How to set up the Duplicate Handling extension:</p>\r\n<ol>\r\n    <li><b>Specify the queue(s) for which the extension will be used</b></li>\r\n    <li><b>Configure detection rules and actions.</b></li>\r\n</ol>\r\n<p><a href=\"https://rossum.ai/help/article/duplicate-handling-extension/\" target=\"_blank\" rel=\"noopener noreferrer\">Read this article</a> if you need help.</p>\r\n</div>",
  "read_more_url": "https://rossum.ai/help/article/duplicate-handling-extension/",
  "extension_image_url": "https://rossum.ai/help/wp-content/uploads/2024/01/Duplicate-Handling.png",
  "token_lifetime_s": null,
  "hook_template": "https://us.api.rossum.ai/v1/hook_templates/28",
  "created_by": null,
  "created_at": null,
  "modified_by": "https://us.api.rossum.ai/v1/users/176601",
  "modified_at": "2025-04-30T20:52:59.501778Z"
}