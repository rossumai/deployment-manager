{
  "id": 689106,
  "type": "webhook",
  "name": "Master Data Hub (S2K PO) (GL Coding)",
  "url": "https://us.api.rossum.ai/v1/hooks/689106",
  "description": "Enhance the extracted data with details from your master records.",
  "settings": {
    "configurations": [
      {
        "name": "GL matching (preselection 201000)",
        "source": {
          "dataset": "s2k_po_gl_codes",
          "queries": [
            {
              "aggregate": [
                {
                  "$match": {
                    "$or": [
                      {
                        "branch": null
                      },
                      {
                        "branch": "{item_branch_id_normalized}"
                      }
                    ]
                  }
                },
                {
                  "$addFields": {
                    "dm_id": {
                      "$concat": [
                        {
                          "$toString": "$gl_code"
                        },
                        "_",
                        "{item_preselected_gl_code}"
                      ]
                    },
                    "is_preselected": {
                      "$eq": [
                        {
                          "$toString": "$gl_code"
                        },
                        "{item_preselected_gl_code}"
                      ]
                    }
                  }
                },
                {
                  "$sort": {
                    "is_preselected": -1
                  }
                }
              ]
            }
          ]
        },
        "default": {
          "label": "---",
          "value": ""
        },
        "mapping": {
          "dataset_key": "dm_id",
          "label_template": "{gl_code} ({description})",
          "target_schema_id": "item_gl_code_match"
        },
        "result_actions": {
          "no_match_found": {
            "message": {
              "type": "error",
              "content": "No match found"
            }
          },
          "one_match_found": {
            "select": "best_match"
          },
          "multiple_matches_found": {
            "select": "best_match"
          }
        },
        "action_condition": "'{item_preselected_gl_code}' != ''"
      },
      {
        "name": "GL matching (no preselection schema_id = no best_match preselection)",
        "source": {
          "dataset": "s2k_po_gl_codes",
          "queries": [
            {
              "aggregate": [
                {
                  "$match": {
                    "$or": [
                      {
                        "branch": null
                      },
                      {
                        "branch": "{item_branch_id_normalized}"
                      }
                    ]
                  }
                },
                {
                  "$addFields": {
                    "dm_id": {
                      "$concat": [
                        {
                          "$toString": "$gl_code"
                        },
                        "_",
                        "{item_preselected_gl_code}"
                      ]
                    }
                  }
                }
              ]
            }
          ]
        },
        "default": {
          "label": "---",
          "value": ""
        },
        "mapping": {
          "dataset_key": "dm_id",
          "label_template": "{gl_code} ({description})",
          "target_schema_id": "item_gl_code_match"
        },
        "result_actions": {
          "no_match_found": {
            "message": {
              "type": "error",
              "content": "No match found"
            }
          },
          "one_match_found": {
            "select": "best_match"
          },
          "multiple_matches_found": {
            "select": "default"
          }
        },
        "action_condition": "'{item_preselected_gl_code}' == ''"
      }
    ]
  },
  "active": true,
  "events": [
    "annotation_content.initialize",
    "annotation_content.started",
    "annotation_content.updated"
  ],
  "queues": [
    "https://us.api.rossum.ai/v1/queues/1771791"
  ],
  "run_after": [
    "https://us.api.rossum.ai/v1/hooks/593147"
  ],
  "metadata": {},
  "config": {
    "private": true,
    "schedule": {},
    "app": null,
    "payload_logging_enabled": false,
    "timeout_s": 60,
    "max_polling_time_s": 300,
    "retry_count": 4,
    "retry_after_polling_failure": true,
    "insecure_ssl": false,
    "client_ssl_certificate": null,
    "retry_on_any_non_2xx": false
  },
  "test": {},
  "sideload": [
    "schemas"
  ],
  "settings_schema": null,
  "secrets_schema": {
    "type": "object",
    "additionalProperties": {
      "type": "string"
    }
  },
  "token_owner": "https://us.api.rossum.ai/v1/users/383208",
  "extension_source": "rossum_store",
  "guide": "<div>\r\n    <p>To manage and configure the behavior, use our configurator below.</p> \r\n    <p>Start by</p>\r\n    <ul>\r\n        <li>Selecting the queues that you want to use for this extension below</li>\r\n    </ul>\r\n    <p>Then open Master Data Hub and</p>\r\n    <ul>\r\n        <li>Import the dataset with Dataset Management</li>\r\n        <li>Create and set up a new configuration in Configurator</li>\r\n    </ul>\r\n    <p>For more information, take a look at our documentation <a href=\"https://rossum.ai/help/article/master-data-hub-extension\" target=\"_blank\">here</a>.</p>\r\n\r\n    <p><form action=\"https://us.app.rossum.ai/svc/master-data-hub/web/\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n        <button type=\"submit\"style=\"\r\n            border: none;    \r\n            background: var(--color-primary);\r\n            border-radius: 4px;\r\n            padding: 6px 16px;\r\n            color: var(--white);\r\n            font-weight: 500;\"\r\n         >\r\n            Open configurator\r\n        </button>\r\n    </form></p>\r\n</div>",
  "read_more_url": "https://elis.rossum.ai/svc/master-data-hub/api/docs",
  "extension_image_url": "https://rossum.ai/help/wp-content/uploads/2024/01/Master-Data-Hub.png",
  "token_lifetime_s": 7200,
  "hook_template": "https://us.api.rossum.ai/v1/hook_templates/39",
  "created_by": null,
  "created_at": null,
  "modified_by": "https://us.api.rossum.ai/v1/users/354857",
  "modified_at": "2025-04-16T08:22:27.062433Z"
}